# 启动命令中的 app 变量名解析

## 命令格式说明

```bash
python3 -m uvicorn code_multimodal.app:app --host 0.0.0.0 --port 8000 --reload
```

### 格式拆解

```
code_multimodal.app:app
    │              │
    │              └─→ 变量名（FastAPI 实例的名字）
    └─→ 模块路径（文件路径）
```

## 详细解释

### 1. `code_multimodal.app`
- **模块路径**：对应文件系统中的 `code_multimodal/app.py`
- `code_multimodal` = 文件夹名
- `app` = Python 文件名（不含 `.py`）

### 2. `:app`（冒号后面）
- **变量名**：`app.py` 文件中定义的 FastAPI 实例的变量名
- 对应代码第 19 行：
  ```python
  app = FastAPI(title="Multimodal RAG API")
  ```

## 验证

看代码第 19 行：
```python
app = FastAPI(title="Multimodal RAG API")  # ← 这个变量名是 app
```

所以启动命令是：
```bash
code_multimodal.app:app
                # ↑ 指向上面的 app 变量
```

## 如果改成 APP 会怎样？

### 假设代码改成：
```python
# 第 19 行改成
APP = FastAPI(title="Multimodal RAG API")
```

### 那么启动命令必须改成：
```bash
python3 -m uvicorn code_multimodal.app:APP --host 0.0.0.0 --port 8000 --reload
                                                      # ↑ 注意：必须是大写 APP
```

**否则会报错**：`AttributeError: module 'code_multimodal.app' has no attribute 'app'`

## 实际示例对比

### 示例 1：变量名是 `app`（当前代码）
```python
# app.py 文件
app = FastAPI(...)
```
```bash
# 启动命令
uvicorn code_multimodal.app:app
```

### 示例 2：变量名是 `APP`
```python
# app.py 文件
APP = FastAPI(...)
```
```bash
# 启动命令（必须对应）
uvicorn code_multimodal.app:APP
```

### 示例 3：变量名是 `my_app`
```python
# app.py 文件
my_app = FastAPI(...)
```
```bash
# 启动命令（必须对应）
uvicorn code_multimodal.app:my_app
```

## 规则总结

启动命令的格式是：
```
模块路径:变量名
```

**规则**：
1. 冒号前的部分 = Python 文件路径（用点号分隔）
2. 冒号后的部分 = **必须完全匹配**代码中的 FastAPI 实例变量名

## 验证方法

如果你想验证，可以这样做：

1. **查看变量名**：
   ```bash
   grep "= FastAPI" code_multimodal/app.py
   # 输出：app = FastAPI(...)
   ```

2. **测试命令是否匹配**：
   - 如果代码是 `app = FastAPI(...)` → 命令用 `:app`
   - 如果代码是 `APP = FastAPI(...)` → 命令用 `:APP`
   - 如果代码是 `my_app = FastAPI(...)` → 命令用 `:my_app`

## 完整映射关系

```
代码中的变量定义              →  启动命令中的变量名部分
──────────────────────────────────────────────────
app = FastAPI(...)           →  :app
APP = FastAPI(...)           →  :APP  
my_app = FastAPI(...)        →  :my_app
application = FastAPI(...)   →  :application
```

**重要**：变量名必须**完全匹配**，包括大小写！

